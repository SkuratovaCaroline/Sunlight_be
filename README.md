# Sunlight Cinema - Backend

## –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞
Backend-—á–∞—Å—Ç—å –≤–µ–±-—Å–µ—Ä–≤–∏—Å–∞ –¥–ª—è –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –±–∏–ª–µ—Ç–æ–≤ –≤ —Å–µ—Ç—å –∫–∏–Ω–æ—Ç–µ–∞—Ç—Ä–æ–≤ Sunlight cinema.

##  –°—Ç–µ–∫ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π
- **Backend**: Java 17+, Spring Boot 3.+
- **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö**: PostgreSQL
- **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: JUnit5

##  –†–æ–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ –≤–∞—Ä–∏–∞–Ω—Ç—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### 1.  –ì–æ—Å—Ç—å (–ù–µ–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å)
- –ü—Ä–æ—Å–º–æ—Ç—Ä –∞—Ñ–∏—à–∏ –∏ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è —Å–µ–∞–Ω—Å–æ–≤
- –ü—Ä–æ—Å–º–æ—Ç—Ä —Å—Ö–µ–º –∑–∞–ª–æ–≤
- –ü–æ–∫—É–ø–∫–∞ –±–∏–ª–µ—Ç–æ–≤ –±–µ–∑ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
- –ß—Ç–µ–Ω–∏–µ –æ—Ç–∑—ã–≤–æ–≤ –∏ —Ä–µ—Ü–µ–Ω–∑–∏–π
- –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –≤ —Å–∏—Å—Ç–µ–º–µ
- –ü—Ä–æ—Å–º–æ—Ç—Ä –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –∫–∏–Ω–æ—Ç–µ–∞—Ç—Ä–∞—Ö

### 2.  –ê–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
- –í—Ö–æ–¥ –≤ –∞–∫–∫–∞—É–Ω—Ç
- –ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –º–µ—Å—Ç –Ω–∞ —Å–µ–∞–Ω—Å—ã
- –ü–æ–∫—É–ø–∫–∞ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤
- –û—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –æ—Ç–∑—ã–≤–æ–≤ –∏ –æ—Ü–µ–Ω–æ–∫ –∫ —Ñ–∏–ª—å–º–∞–º
- –û—Ü–µ–Ω–∫–∞ –ø–æ–ª–µ–∑–Ω–æ—Å—Ç–∏ —á—É–∂–∏—Ö –æ—Ç–∑—ã–≤–æ–≤
- –ü—Ä–æ—Å–º–æ—Ç—Ä –Ω–∞–∫–æ–ø–∏—Ç–µ–ª—å–Ω–æ–π —Å–∫–∏–¥–∫–∏
- –ü–æ–ª—É—á–µ–Ω–∏–µ —ç–∫—Å–∫–ª—é–∑–∏–≤–Ω—ã—Ö –∞–∫—Ü–∏–π
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞–º–∏: "–ü—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–Ω—ã–µ" –∏ "–ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ"
- –û–±—â–µ–Ω–∏–µ –≤ —á–∞—Ç–µ –ø–æ–¥–¥–µ—Ä–∂–∫–∏

### 3.  –ú–æ–¥–µ—Ä–∞—Ç–æ—Ä
- –ú–æ–¥–µ—Ä–∞—Ü–∏—è –Ω–æ–≤—ã—Ö –æ—Ç–∑—ã–≤–æ–≤
- –û–¥–æ–±—Ä–µ–Ω–∏–µ/–æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ –æ—Ç–∑—ã–≤–æ–≤
- –û—Ç–≤–µ—Ç—ã –Ω–∞ –æ—Ç–∑—ã–≤—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≤ –æ–Ω–ª–∞–π–Ω-—á–∞—Ç–µ

### 4.  –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–∏–Ω–æ—Ç–µ–∞—Ç—Ä–∞–º–∏ –∏ –∑–∞–ª–∞–º–∏
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ–º —Å–µ–∞–Ω—Å–æ–≤
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–∞–∑–æ–π —Ñ–∏–ª—å–º–æ–≤
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —ç–∫—Å–∫–ª—é–∑–∏–≤–Ω—ã—Ö –∞–∫—Ü–∏–π
- –ö–æ–Ω—Ç—Ä–æ–ª—å —Ä–∞–±–æ—Ç—ã —Å–∏—Å—Ç–µ–º—ã
- –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤

![–î–∏–∞–≥—Ä–∞–º–º–∞ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è1](docs/images/use-case-diagram1.jpg)
![–î–∏–∞–≥—Ä–∞–º–º–∞ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è2](docs/images/use-case-diagram2.jpg)


##  –°—Ö–µ–º–∞ –ë–î - ER –¥–∏–∞–≥—Ä–∞–º–º–∞
![ER-–¥–∏–∞–≥—Ä–∞–º–º–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö](docs/images/er-diagram.jpg)

##  API

###  –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏

| –ú–µ—Ç–æ–¥ | URL | –û–ø–∏—Å–∞–Ω–∏–µ | –†–æ–ª—å |
|-------|-----|-----------|------|
| POST | `/api/auth/register` | –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è | –ì–æ—Å—Ç—å |
| POST | `/api/auth/login` | –í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É | –í—Å–µ |
| GET | `/api/users/profile` | –ü—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è | –ó—Ä–∏—Ç–µ–ª—å |
| GET | `/api/users/watch-history` | –ò—Å—Ç–æ—Ä–∏—è –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤ | –ó—Ä–∏—Ç–µ–ª—å |
| GET | `/api/users/watchlist` | –°–ø–∏—Å–æ–∫ –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö | –ó—Ä–∏—Ç–µ–ª—å |

###  –§–∏–ª—å–º—ã –∏ —Å–µ–∞–Ω—Å—ã

| –ú–µ—Ç–æ–¥ | URL | –û–ø–∏—Å–∞–Ω–∏–µ | –†–æ–ª—å |
|-------|-----|-----------|------|
| GET | `/api/films` | –ö–∞—Ç–∞–ª–æ–≥ —Ñ–∏–ª—å–º–æ–≤ | –í—Å–µ |
| GET | `/api/films/{fid}` | –î–µ—Ç–∞–ª–∏ —Ñ–∏–ª—å–º–∞ | –í—Å–µ |
| GET | `/api/sessions` | –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ —Å–µ–∞–Ω—Å–æ–≤ | –í—Å–µ |
| GET | `/api/sessions/{s_id}/seats` | –°–≤–æ–±–æ–¥–Ω—ã–µ –º–µ—Å—Ç–∞ | –í—Å–µ |
| POST | `/api/admin/films` | –î–æ–±–∞–≤–∏—Ç—å —Ñ–∏–ª—å–º | –ê–¥–º–∏–Ω |
| PUT | `/api/admin/sessions/{s_id}` | –û–±–Ω–æ–≤–∏—Ç—å —Å–µ–∞–Ω—Å | –ê–¥–º–∏–Ω |

###  –ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –±–∏–ª–µ—Ç–æ–≤

| –ú–µ—Ç–æ–¥ | URL | –û–ø–∏—Å–∞–Ω–∏–µ | –†–æ–ª—å |
|-------|-----|-----------|------|
| POST | `/api/tickets/reserve` | –ó–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞—Ç—å –º–µ—Å—Ç–∞ | –ó—Ä–∏—Ç–µ–ª—å |
| POST | `/api/tickets/confirm` | –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –±—Ä–æ–Ω—å | –ó—Ä–∏—Ç–µ–ª—å |
| GET | `/api/tickets/{tcode}` | –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –±–∏–ª–µ—Ç–µ | –ó—Ä–∏—Ç–µ–ª—å |
| GET | `/api/users/tickets` | –ú–æ–∏ –±–∏–ª–µ—Ç—ã | –ó—Ä–∏—Ç–µ–ª—å |

###  –°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã

| –ú–µ—Ç–æ–¥ | URL | –û–ø–∏—Å–∞–Ω–∏–µ | –†–æ–ª—å |
|-------|-----|-----------|------|
| GET | `/api/certificates` | –î–æ—Å—Ç—É–ø–Ω—ã–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã | –í—Å–µ |
| POST | `/api/certificates/purchase` | –ü–æ–∫—É–ø–∫–∞ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞ | –ó—Ä–∏—Ç–µ–ª—å |
| GET | `/api/users/certificates` | –ú–æ–∏ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã | –ó—Ä–∏—Ç–µ–ª—å |
| POST | `/api/admin/certificates` | –°–æ–∑–¥–∞—Ç—å —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç | –ê–¥–º–∏–Ω |

###  –ß–∞—Ç –ø–æ–¥–¥–µ—Ä–∂–∫–∏

| –ú–µ—Ç–æ–¥ | URL | –û–ø–∏—Å–∞–Ω–∏–µ | –†–æ–ª—å |
|-------|-----|-----------|------|
| GET | `/api/support/conversations` | –°–ø–∏—Å–æ–∫ –¥–∏–∞–ª–æ–≥–æ–≤ | –ó—Ä–∏—Ç–µ–ª—å/–ú–æ–¥–µ—Ä–∞—Ç–æ—Ä |
| POST | `/api/support/conversations` | –ù–∞—á–∞—Ç—å –¥–∏–∞–ª–æ–≥ | –ó—Ä–∏—Ç–µ–ª—å |
| GET | `/api/support/conversations/{id}/messages` | –°–æ–æ–±—â–µ–Ω–∏—è –¥–∏–∞–ª–æ–≥–∞ | –ó—Ä–∏—Ç–µ–ª—å/–ú–æ–¥–µ—Ä–∞—Ç–æ—Ä |
| POST | `/api/support/messages` | –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ | –ó—Ä–∏—Ç–µ–ª—å/–ú–æ–¥–µ—Ä–∞—Ç–æ—Ä |

###  –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞–º–∏ —Ñ–∏–ª—å–º–æ–≤

| –ú–µ—Ç–æ–¥ | URL | –û–ø–∏—Å–∞–Ω–∏–µ | –†–æ–ª—å |
|-------|-----|-----------|------|
| POST | `/api/users/watchlist/{fid}` | –î–æ–±–∞–≤–∏—Ç—å –≤ –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ | –ó—Ä–∏—Ç–µ–ª—å |
| DELETE | `/api/users/watchlist/{fid}` | –£–¥–∞–ª–∏—Ç—å –∏–∑ –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö | –ó—Ä–∏—Ç–µ–ª—å |
| POST | `/api/users/watched/{fid}` | –û—Ç–º–µ—Ç–∏—Ç—å –∫–∞–∫ –ø—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–Ω—ã–π | –ó—Ä–∏—Ç–µ–ª—å |


## üìò Swagger API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–ü—Ä–æ–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç [Swagger UI](https://swagger.io/tools/swagger-ui/) –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ REST API.

### üîß –ö–∞–∫ –∑–∞–ø—É—Å—Ç–∏—Ç—å Swagger UI

1. –ü—Ä–æ–µ–∫—Ç —Å–æ–±—Ä–∞–Ω –∏ –∑–∞–ø—É—â–µ–Ω (`mvn spring-boot:run` –∏–ª–∏ —á–µ—Ä–µ–∑ IDE).
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –ø–æ –∞–¥—Ä–µ—Å—É: [http://localhost:8080/swagger-ui/index.html](http://localhost:8080/swagger-ui/index.html)

### üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ API

- –í—Å–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ –ø–∞–∫–µ—Ç–∞—Ö `com.sunlight_cinema.sunlight_cinema.controller`
- –ú–µ—Ç–æ–¥—ã –∞–Ω–Ω–æ—Ç–∏—Ä–æ–≤–∞–Ω—ã `@Operation`, `@Parameter`, `@ApiResponse` –¥–ª—è —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω–æ–≥–æ –æ–ø–∏—Å–∞–Ω–∏—è

### üì§ –≠–∫—Å–ø–æ—Ä—Ç —Å—Ö–µ–º—ã OpenAPI

–î–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å—Ö–µ–º—ã –≤ —Ñ–æ—Ä–º–∞—Ç–µ JSON –∏–ª–∏ YAML:

- JSON: [http://localhost:8080/v3/api-docs](http://localhost:8080/v3/api-docs)
- YAML: [http://localhost:8080/v3/api-docs.yaml](http://localhost:8080/v3/api-docs.yaml)

### üì¶ –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Å—Ö–µ–º—ã

–°—Ö–µ–º—É –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∫–ª–∏–µ–Ω—Ç–∞, –Ω–∞–ø—Ä–∏–º–µ—Ä —Å –ø–æ–º–æ—â—å—é [OpenAPI Generator](https://openapi-generator.tech/):

```bash
openapi-generator-cli generate \
  -i http://localhost:8080/v3/api-docs \
  -g java \
  -o ./generated-client
